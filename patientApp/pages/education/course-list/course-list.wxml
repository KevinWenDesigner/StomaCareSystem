<!--patient-app/pages/education/course-list/course-list.wxml-->
<view class="container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="page-header">
    <view class="header-left" bindtap="goBack">
      <text class="back-icon">â†</text>
    </view>
    <text class="page-title">{{categoryName}}</text>
    <view class="header-right"></view>
  </view>

  <!-- æœç´¢å’Œç­›é€‰åŒºåŸŸ -->
  <view class="search-section">
    <view class="search-box">
      <text class="search-icon">ğŸ”</text>
      <input class="search-input" 
             placeholder="æœç´¢è¯¾ç¨‹..." 
             value="{{searchKeyword}}"
             bindinput="onSearchInput"
             bindconfirm="onSearchConfirm" />
    </view>
    
    <view class="filter-section">
      <view class="filter-tabs">
        <view class="filter-tab {{currentFilter === 'all' ? 'active' : ''}}" 
              bindtap="setFilter" data-filter="all">
          <text class="tab-text">å…¨éƒ¨</text>
        </view>
        <view class="filter-tab {{currentFilter === 'basic' ? 'active' : ''}}" 
              bindtap="setFilter" data-filter="basic">
          <text class="tab-text">åŸºç¡€çŸ¥è¯†</text>
        </view>
        <view class="filter-tab {{currentFilter === 'practice' ? 'active' : ''}}" 
              bindtap="setFilter" data-filter="practice">
          <text class="tab-text">å®è·µæ“ä½œ</text>
        </view>
        <view class="filter-tab {{currentFilter === 'diet' ? 'active' : ''}}" 
              bindtap="setFilter" data-filter="diet">
          <text class="tab-text">é¥®é£ŸæŒ‡å¯¼</text>
        </view>
        <view class="filter-tab {{currentFilter === 'emergency' ? 'active' : ''}}" 
              bindtap="setFilter" data-filter="emergency">
          <text class="tab-text">åº”æ€¥å¤„ç†</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-state">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- è¯¾ç¨‹åˆ—è¡¨ -->
  <view wx:else class="course-list">
    <view wx:if="{{filteredCourses.length === 0}}" class="empty-state">
      <text class="empty-icon">ğŸ“š</text>
      <text class="empty-text">æš‚æ— è¯¾ç¨‹</text>
      <text class="empty-subtext">{{searchKeyword ? 'æ²¡æœ‰æ‰¾åˆ°ç›¸å…³è¯¾ç¨‹' : 'è¯¥åˆ†ç±»ä¸‹æš‚æ— è¯¾ç¨‹å†…å®¹'}}</text>
    </view>
    
    <view wx:else>
      <view wx:for="{{filteredCourses}}" wx:key="id" class="course-item">
        <view class="course-card">
          <view class="course-header">
            <text class="course-title">{{item.title}}</text>
            <view class="course-level level-{{item.level}}">
              <text class="level-text">{{item.levelText}}</text>
            </view>
          </view>
          
          <text class="course-desc">{{item.description}}</text>
          
          <view class="course-meta">
            <view class="meta-item">
              <text class="meta-icon">â±ï¸</text>
              <text class="meta-text">{{item.duration}}</text>
            </view>
            <view class="meta-item">
              <text class="meta-icon">ğŸ‘¥</text>
              <text class="meta-text">{{item.students}}äººå­¦ä¹ </text>
            </view>
            <view class="meta-item">
              <text class="meta-icon">â­</text>
              <text class="meta-text">{{item.rating}}åˆ†</text>
            </view>
          </view>
          
          <view class="course-progress">
            <view class="progress-bar">
              <view class="progress-fill" style="width: {{item.progress}}%"></view>
            </view>
            <text class="progress-text">å·²å®Œæˆ {{item.progress}}%</text>
          </view>
          
          <view class="course-actions">
            <button class="action-btn detail" bindtap="viewCourse" data-id="{{item.id}}">
              <text class="btn-text">æŸ¥çœ‹è¯¦æƒ…</text>
            </button>
            <button class="action-btn primary" bindtap="startLearning" data-id="{{item.id}}">
              <text class="btn-text">{{item.progress > 0 ? 'ç»§ç»­å­¦ä¹ ' : 'å¼€å§‹å­¦ä¹ '}}</text>
            </button>
          </view>
        </view>
      </view>
    </view>
  </view>
</view> 