<!--nurse-app/pages/dashboard/dashboard.wxml-->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <text class="page-title">å·¥ä½œå°</text>
    <text class="page-subtitle">æ¬¢è¿å›æ¥ï¼Œ{{nurseInfo.name}}</text>
  </view>

  <!-- å¿«é€Ÿç»Ÿè®¡ -->
  <view class="stats-section">
    <view class="stats-grid">
      <view class="stat-card">
        <view class="stat-icon">ğŸ‘¥</view>
        <view class="stat-content">
          <text class="stat-number">{{dashboardStats.patients}}</text>
          <text class="stat-label">ç®¡ç†æ‚£è€…</text>
        </view>
      </view>
      
      <view class="stat-card">
        <view class="stat-icon">ğŸ“‹</view>
        <view class="stat-content">
          <text class="stat-number">{{dashboardStats.tasks}}</text>
          <text class="stat-label">å¾…åŠä»»åŠ¡</text>
        </view>
      </view>
      
      <view class="stat-card">
        <view class="stat-icon">ğŸ“Š</view>
        <view class="stat-content">
          <text class="stat-number">{{dashboardStats.assessments}}</text>
          <text class="stat-label">ä»Šæ—¥è¯„ä¼°</text>
        </view>
      </view>
      
      <view class="stat-card">
        <view class="stat-icon">ğŸ¯</view>
        <view class="stat-content">
          <text class="stat-number">{{dashboardStats.score}}</text>
          <text class="stat-label">æŠ¤ç†è¯„åˆ†</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æœ€è¿‘æ‚£è€… -->
  <view class="patients-section">
    <view class="section-header">
      <text class="section-title">æœ€è¿‘æ‚£è€…</text>
      <button class="view-all-btn" bindtap="viewAllPatients">
        <text class="btn-text">æŸ¥çœ‹å…¨éƒ¨</text>
      </button>
    </view>
    
    <view wx:if="{{recentPatients.length === 0}}" class="empty-state">
      <text class="empty-icon">ğŸ‘¥</text>
      <text class="empty-text">æš‚æ— æ‚£è€…</text>
      <text class="empty-subtext">å¼€å§‹ç®¡ç†æ‚¨çš„æ‚£è€…</text>
    </view>
    
    <view wx:else class="patients-list">
      <view wx:for="{{recentPatients}}" wx:key="id" class="patient-item">
        <view class="patient-card" bindtap="viewPatientDetail" data-id="{{item.id}}">
          <view class="patient-avatar">
            <text class="avatar-text">{{item.name.charAt(0)}}</text>
          </view>
          <view class="patient-content">
            <text class="patient-name">{{item.name}}</text>
            <text class="patient-info">{{item.age}}å² Â· {{item.gender}} Â· {{item.careDays}}å¤©</text>
            <text class="patient-status">çŠ¶æ€: {{item.status}}</text>
          </view>
          <view class="patient-actions">
            <button class="action-btn" data-id="{{item.id}}" bindtap="contactPatient">
              <text class="action-text">è”ç³»</text>
            </button>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- å¾…åŠä»»åŠ¡ -->
  <view class="tasks-section">
    <view class="section-header">
      <text class="section-title">å¾…åŠä»»åŠ¡</text>
      <text class="section-subtitle">ä»Šæ—¥å¾…å¤„ç†</text>
    </view>
    
    <view wx:if="{{pendingTasks.length === 0}}" class="empty-state">
      <text class="empty-icon">âœ…</text>
      <text class="empty-text">ä»Šæ—¥æ— å¾…åŠ</text>
      <text class="empty-subtext">ç»§ç»­ä¿æŒé«˜æ•ˆå·¥ä½œ</text>
    </view>
    
    <view wx:else class="tasks-list">
      <view wx:for="{{pendingTasks}}" wx:key="id" class="task-item">
        <view class="task-card">
          <view class="task-header">
            <text class="task-title">{{item.title}}</text>
            <view class="task-priority priority-{{item.priority}}">
              <text class="priority-text">{{getPriorityText(item.priority)}}</text>
            </view>
          </view>
          
          <text class="task-description">{{item.description}}</text>
          
          <view class="task-meta">
            <text class="task-patient">æ‚£è€…: {{item.patientName}}</text>
            <text class="task-time">{{item.dueTime}}</text>
          </view>
          
          <view class="task-actions">
            <button class="task-btn" data-id="{{item.id}}" bindtap="completeTask">
              <text class="btn-text">å®Œæˆä»»åŠ¡</text>
            </button>
            <button class="task-btn outline" data-id="{{item.id}}" bindtap="viewTaskDetail">
              <text class="btn-text">æŸ¥çœ‹è¯¦æƒ…</text>
            </button>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- æŠ¤ç†æé†’ -->
  <view class="reminders-section">
    <view class="section-header">
      <text class="section-title">æŠ¤ç†æé†’</text>
      <text class="section-subtitle">é‡è¦æé†’</text>
    </view>
    
    <view wx:if="{{reminders.length === 0}}" class="empty-state">
      <text class="empty-icon">â°</text>
      <text class="empty-text">æš‚æ— æé†’</text>
      <text class="empty-subtext">è®¾ç½®æŠ¤ç†æé†’</text>
    </view>
    
    <view wx:else class="reminders-list">
      <view wx:for="{{reminders}}" wx:key="id" class="reminder-item">
        <view class="reminder-card">
          <view class="reminder-icon">â°</view>
          <view class="reminder-content">
            <text class="reminder-title">{{item.title}}</text>
            <text class="reminder-time">{{item.time}}</text>
          </view>
          <button class="reminder-btn" data-id="{{item.id}}" bindtap="dismissReminder">
            <text class="btn-text">å·²è¯»</text>
          </button>
        </view>
      </view>
    </view>
  </view>
</view> 