# æŠ¤ç†æ•™è‚²æ¨¡å— - å‰åç«¯æ•°æ®åº“äº¤äº’å®æ–½æŒ‡å—

## ğŸ“‹ ç›®å½•
1. [ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ](#ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ)
2. [å½“å‰å®ç°çŠ¶æ€](#å½“å‰å®ç°çŠ¶æ€)
3. [å®æ–½æ­¥éª¤](#å®æ–½æ­¥éª¤)
4. [APIæ¥å£è¯´æ˜](#apiæ¥å£è¯´æ˜)
5. [æ•°æ®æµç¨‹å›¾](#æ•°æ®æµç¨‹å›¾)
6. [æµ‹è¯•éªŒè¯](#æµ‹è¯•éªŒè¯)
7. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

### æŠ€æœ¯æ ˆ
- **å‰ç«¯**: å¾®ä¿¡å°ç¨‹åº (WXML, WXSS, JavaScript)
- **åç«¯**: Node.js + Express
- **æ•°æ®åº“**: MySQL
- **APIé€šä¿¡**: RESTful API (JWTè®¤è¯)

### æ¨¡å—ç»“æ„
```
æŠ¤ç†æ•™è‚²æ¨¡å—
â”œâ”€â”€ å‰ç«¯ (patientApp/pages/education/)
â”‚   â”œâ”€â”€ education.js/wxml/wxss          # è¯¾ç¨‹åˆ—è¡¨é¡µ
â”‚   â”œâ”€â”€ course-list/                     # åˆ†ç±»è¯¾ç¨‹åˆ—è¡¨
â”‚   â”œâ”€â”€ course-detail/                   # è¯¾ç¨‹è¯¦æƒ…é¡µ
â”‚   â””â”€â”€ course-study/                    # è¯¾ç¨‹å­¦ä¹ é¡µ
â”œâ”€â”€ åç«¯ (backend/src/)
â”‚   â”œâ”€â”€ controllers/courseController.js  # è¯¾ç¨‹æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ models/Course.js                 # è¯¾ç¨‹æ¨¡å‹
â”‚   â”œâ”€â”€ models/LearningRecord.js         # å­¦ä¹ è®°å½•æ¨¡å‹
â”‚   â””â”€â”€ routes/courseRoutes.js           # è¯¾ç¨‹è·¯ç”±
â””â”€â”€ æ•°æ®åº“
    â”œâ”€â”€ courses                          # è¯¾ç¨‹è¡¨
    â”œâ”€â”€ course_categories                # è¯¾ç¨‹åˆ†ç±»è¡¨
    â””â”€â”€ learning_records                 # å­¦ä¹ è®°å½•è¡¨
```

---

## å½“å‰å®ç°çŠ¶æ€

### âœ… å·²å®Œæˆçš„åŠŸèƒ½

#### 1. å‰ç«¯ç»„ä»¶
- [x] æ•™è‚²é¦–é¡µ (education.js)
  - è¯¾ç¨‹åˆ†ç±»å±•ç¤ºï¼ˆåŸºç¡€çŸ¥è¯†ã€å®è·µæ“ä½œã€é¥®é£ŸæŒ‡å¯¼ã€åº”æ€¥å¤„ç†ï¼‰
  - æ¨èè¯¾ç¨‹åˆ—è¡¨
  - å­¦ä¹ ç»Ÿè®¡æ•°æ®
  - æœ€è¿‘å­¦ä¹ è®°å½•
- [x] è¯¾ç¨‹è¯¦æƒ…é¡µ (course-detail.js)
  - è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯å±•ç¤º
  - å­¦ä¹ è¿›åº¦æ˜¾ç¤º
  - è¯¾ç¨‹ç‚¹èµåŠŸèƒ½
  - å¼€å§‹å­¦ä¹ /ç»§ç»­å­¦ä¹ 
- [x] è¯¾ç¨‹å­¦ä¹ é¡µ (course-study.js)
  - ç« èŠ‚å­¦ä¹ 
  - è¿›åº¦è·Ÿè¸ª
  - å®Œæˆåº¦ç»Ÿè®¡

#### 2. åç«¯API
- [x] CourseController (backend/src/controllers/courseController.js)
  ```javascript
  GET  /api/courses/categories        # è·å–è¯¾ç¨‹åˆ†ç±»
  GET  /api/courses                   # è·å–è¯¾ç¨‹åˆ—è¡¨
  GET  /api/courses/:id               # è·å–è¯¾ç¨‹è¯¦æƒ…
  POST /api/courses/:id/progress      # è®°å½•å­¦ä¹ è¿›åº¦
  GET  /api/courses/my-learning       # è·å–æˆ‘çš„å­¦ä¹ è®°å½•
  POST /api/courses/:id/like          # ç‚¹èµè¯¾ç¨‹
  ```

#### 3. æ•°æ®æ¨¡å‹
- [x] Course.js - è¯¾ç¨‹CRUDæ“ä½œ
- [x] LearningRecord.js - å­¦ä¹ è®°å½•ç®¡ç†

#### 4. APIå°è£…
- [x] api.js (patientApp/utils/api.js)
  - getCourses() - è·å–è¯¾ç¨‹åˆ—è¡¨
  - getCourseDetail() - è·å–è¯¾ç¨‹è¯¦æƒ…
  - getMyLearning() - è·å–å­¦ä¹ è®°å½•
  - recordCourseProgress() - è®°å½•è¿›åº¦
  - likeCourse() - ç‚¹èµè¯¾ç¨‹

---

## å®æ–½æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šç¡®è®¤æ•°æ®åº“å·²åˆå§‹åŒ–

#### 1.1 æ£€æŸ¥æ•°æ®åº“è¿æ¥é…ç½®
```bash
# ç¼–è¾‘æ•°æ®åº“é…ç½®æ–‡ä»¶
# backend/src/config/database.js
```

ç¡®ä¿é…ç½®æ­£ç¡®ï¼š
```javascript
{
  host: 'localhost',
  port: 3306,
  user: 'root',
  password: 'ä½ çš„å¯†ç ',
  database: 'stoma_care'
}
```

#### 1.2 è¿è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# è¿è¡Œåˆå§‹åŒ–è„šæœ¬
node src/scripts/initDatabase.js
```

**é¢„æœŸè¾“å‡ºï¼š**
```
ğŸš€ å¼€å§‹åˆå§‹åŒ–æ•°æ®åº“...
ğŸ“ æ’å…¥åˆå§‹æ•°æ®...
âœ… åˆå§‹æ•°æ®æ’å…¥æˆåŠŸ
ğŸ‰ æ•°æ®åº“åˆå§‹åŒ–å®Œæˆï¼
```

#### 1.3 éªŒè¯æ•°æ®è¡¨
```sql
-- è¿æ¥MySQLï¼ŒéªŒè¯è¡¨æ˜¯å¦åˆ›å»ºæˆåŠŸ
USE stoma_care;

-- æŸ¥çœ‹è¯¾ç¨‹åˆ†ç±»
SELECT * FROM course_categories;
-- åº”è¯¥æœ‰5æ¡è®°å½•ï¼šåŸºç¡€æŠ¤ç†ã€å®æ“æŠ€å·§ã€é¥®é£ŸæŒ‡å¯¼ã€åº”æ€¥å¤„ç†ã€å¿ƒç†åº·å¤

-- æŸ¥çœ‹ç¤ºä¾‹è¯¾ç¨‹
SELECT * FROM courses;
-- åº”è¯¥æœ‰5æ¡ç¤ºä¾‹è¯¾ç¨‹

-- æŸ¥çœ‹è¡¨ç»“æ„
DESC courses;
DESC learning_records;
```

---

### ç¬¬äºŒæ­¥ï¼šå¯åŠ¨åç«¯æœåŠ¡å™¨

#### 2.1 å®‰è£…ä¾èµ–ï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
```bash
cd backend
npm install
```

#### 2.2 å¯åŠ¨æœåŠ¡å™¨
```bash
# å¼€å‘æ¨¡å¼
npm run dev

# æˆ–ä½¿ç”¨PM2ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
pm2 start ecosystem.config.js
```

#### 2.3 éªŒè¯æœåŠ¡å™¨çŠ¶æ€
```bash
# æµ‹è¯•APIå¥åº·æ£€æŸ¥
curl http://localhost:3000/api/health
```

**é¢„æœŸå“åº”ï¼š**
```json
{
  "success": true,
  "message": "æœåŠ¡è¿è¡Œæ­£å¸¸",
  "timestamp": "2025-11-08T...",
  "version": "1.0.0"
}
```

---

### ç¬¬ä¸‰æ­¥ï¼šé…ç½®å°ç¨‹åºå‰ç«¯

#### 3.1 ç¡®è®¤APIåœ°å€é…ç½®
```javascript
// patientApp/config.js

const ENV = 'development'; // å¼€å‘ç¯å¢ƒ

const environments = {
  development: {
    apiBaseUrl: 'http://localhost:3000/api',
    // å¦‚æœæ˜¯çœŸæœºè°ƒè¯•ï¼Œæ”¹ä¸ºä½ ç”µè„‘çš„IPåœ°å€
    // apiBaseUrl: 'http://192.168.1.100:3000/api',
    timeout: 30000,
    enableDebug: true,
  }
};
```

**æ³¨æ„äº‹é¡¹ï¼š**
- **å¼€å‘å·¥å…·è°ƒè¯•**: ä½¿ç”¨ `http://localhost:3000/api`
- **çœŸæœºè°ƒè¯•**: ä½¿ç”¨ä½ ç”µè„‘çš„å±€åŸŸç½‘IPï¼Œå¦‚ `http://192.168.1.100:3000/api`
- ç¡®ä¿æ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€å±€åŸŸç½‘

#### 3.2 é…ç½®å¾®ä¿¡å°ç¨‹åºå¼€å‘å·¥å…·

1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. å¯¼å…¥é¡¹ç›®ï¼šé€‰æ‹© `patientApp` ç›®å½•
3. åœ¨å¼€å‘å·¥å…·ä¸­ï¼š
   - ç‚¹å‡»å³ä¸Šè§’ "è¯¦æƒ…"
   - å‹¾é€‰ "ä¸æ ¡éªŒåˆæ³•åŸŸå"ï¼ˆå¼€å‘é˜¶æ®µï¼‰
   - å‹¾é€‰ "å¯ç”¨è°ƒè¯•"

---

### ç¬¬å››æ­¥ï¼šæµ‹è¯•å®Œæ•´æµç¨‹

#### 4.1 ç”¨æˆ·ç™»å½•
1. å¯åŠ¨å°ç¨‹åº
2. åœ¨é¦–é¡µç‚¹å‡»"å¾®ä¿¡å¿«é€Ÿç™»å½•"
3. ç¡®è®¤ç”¨æˆ·å·²æˆåŠŸç™»å½•ï¼ˆæ£€æŸ¥æ˜¯å¦æœ‰Tokenï¼‰

**éªŒè¯æ–¹å¼ï¼š**
```javascript
// åœ¨å°ç¨‹åºæ§åˆ¶å°æ‰§è¡Œ
console.log(wx.getStorageSync('token'))
// åº”è¯¥è¾“å‡ºä¸€ä¸ªJWT token
```

#### 4.2 æµ‹è¯•è¯¾ç¨‹åˆ—è¡¨åŠ è½½

**å‰ç«¯æ“ä½œï¼š**
1. ç‚¹å‡»åº•éƒ¨å¯¼èˆªæ çš„"æ•™è‚²"æ ‡ç­¾
2. è¿›å…¥æŠ¤ç†æ•™è‚²é¡µé¢

**é¢„æœŸç»“æœï¼š**
- æ˜¾ç¤º4ä¸ªè¯¾ç¨‹åˆ†ç±»å¡ç‰‡ï¼ˆåŸºç¡€çŸ¥è¯†ã€å®è·µæ“ä½œã€é¥®é£ŸæŒ‡å¯¼ã€åº”æ€¥å¤„ç†ï¼‰
- æ˜¾ç¤ºæ¨èè¯¾ç¨‹åˆ—è¡¨ï¼ˆå‰3ä¸ªè¯¾ç¨‹ï¼‰
- æ˜¾ç¤ºå­¦ä¹ ç»Ÿè®¡æ•°æ®

**è°ƒè¯•æ–¹æ³•ï¼š**
```javascript
// æŸ¥çœ‹å°ç¨‹åºæ§åˆ¶å°æ—¥å¿—
// åº”è¯¥çœ‹åˆ°ï¼š
"æŠ¤ç†æ•™è‚²é¡µé¢åŠ è½½"
"è·å–è¯¾ç¨‹åˆ—è¡¨å“åº”: {success: true, data: [...]}"
"è§£æçš„è¯¾ç¨‹æ•°æ®: [...]"
"åŸºç¡€çŸ¥è¯†è¯¾ç¨‹: X"
"å®è·µæ“ä½œè¯¾ç¨‹: X"
```

#### 4.3 æµ‹è¯•è¯¾ç¨‹è¯¦æƒ…æŸ¥çœ‹

**å‰ç«¯æ“ä½œï¼š**
1. åœ¨æ¨èè¯¾ç¨‹åˆ—è¡¨ä¸­ï¼Œç‚¹å‡»ä»»æ„è¯¾ç¨‹å¡ç‰‡
2. è¿›å…¥è¯¾ç¨‹è¯¦æƒ…é¡µ

**é¢„æœŸç»“æœï¼š**
- æ˜¾ç¤ºè¯¾ç¨‹æ ‡é¢˜ã€æè¿°
- æ˜¾ç¤ºè¯¾ç¨‹éš¾åº¦ç­‰çº§
- æ˜¾ç¤ºå­¦ä¹ äººæ•°ã€è¯„åˆ†
- æ˜¾ç¤º"å¼€å§‹å­¦ä¹ "æŒ‰é’®

**åç«¯æ—¥å¿—ï¼š**
```bash
# åº”è¯¥çœ‹åˆ°åç«¯æ¥æ”¶åˆ°è¯·æ±‚
GET /api/courses/:id
è¿”å›è¯¾ç¨‹è¯¦æƒ…æ•°æ®
```

#### 4.4 æµ‹è¯•å¼€å§‹å­¦ä¹ å’Œè¿›åº¦è®°å½•

**å‰ç«¯æ“ä½œï¼š**
1. åœ¨è¯¾ç¨‹è¯¦æƒ…é¡µç‚¹å‡»"å¼€å§‹å­¦ä¹ "
2. è¿›å…¥è¯¾ç¨‹å­¦ä¹ é¡µé¢
3. å®Œæˆç« èŠ‚å­¦ä¹ 
4. è¿”å›æ•™è‚²é¦–é¡µæŸ¥çœ‹è¿›åº¦

**é¢„æœŸç»“æœï¼š**
- å­¦ä¹ è¿›åº¦å·²æ›´æ–°
- "æœ€è¿‘å­¦ä¹ "åˆ—è¡¨æ˜¾ç¤ºè¯¥è¯¾ç¨‹
- å­¦ä¹ ç»Ÿè®¡æ•°æ®å·²æ›´æ–°

**APIè°ƒç”¨æ—¥å¿—ï¼š**
```javascript
// å°ç¨‹åºæ§åˆ¶å°åº”è¯¥æ˜¾ç¤ºï¼š
"è°ƒç”¨åç«¯APIè®°å½•è¿›åº¦: 1, {progress: 30, ...}"
"å­¦ä¹ è¿›åº¦å·²åŒæ­¥åˆ°åç«¯"
```

**æ•°æ®åº“éªŒè¯ï¼š**
```sql
-- æŸ¥è¯¢å­¦ä¹ è®°å½•
SELECT lr.*, c.title 
FROM learning_records lr
JOIN courses c ON lr.course_id = c.id
WHERE lr.patient_id = ?;
```

---

## APIæ¥å£è¯´æ˜

### 1. è·å–è¯¾ç¨‹åˆ—è¡¨
```
GET /api/courses
```

**è¯·æ±‚å‚æ•°ï¼š**
```javascript
{
  categoryId: 1,      // å¯é€‰ï¼Œè¯¾ç¨‹åˆ†ç±»ID
  difficulty: 'beginner',  // å¯é€‰ï¼Œéš¾åº¦: beginner/intermediate/advanced
  keyword: 'é€ å£',    // å¯é€‰ï¼Œæœç´¢å…³é”®è¯
  page: 1,            // é¡µç 
  pageSize: 10        // æ¯é¡µæ•°é‡
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "category_id": 1,
      "category_name": "åŸºç¡€æŠ¤ç†",
      "title": "è®¤è¯†é€ å£",
      "description": "äº†è§£ä»€ä¹ˆæ˜¯é€ å£ï¼Œé€ å£çš„ç±»å‹å’ŒåŸºæœ¬çŸ¥è¯†",
      "cover_image": "/images/course1.jpg",
      "difficulty": "beginner",
      "duration": 1800,
      "view_count": 256,
      "like_count": 45,
      "created_at": "2025-01-01T00:00:00.000Z"
    }
  ],
  "pagination": {
    "total": 50,
    "page": 1,
    "pageSize": 10
  }
}
```

### 2. è·å–è¯¾ç¨‹è¯¦æƒ…
```
GET /api/courses/:id
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "data": {
    "id": 1,
    "title": "è®¤è¯†é€ å£",
    "description": "äº†è§£ä»€ä¹ˆæ˜¯é€ å£...",
    "content": "<h2>ä»€ä¹ˆæ˜¯é€ å£</h2><p>...</p>",
    "video_url": null,
    "difficulty": "beginner",
    "duration": 1800,
    "view_count": 256,
    "like_count": 45,
    "learningRecord": {
      "id": 10,
      "progress": 60,
      "completed": 0,
      "study_duration": 900
    }
  }
}
```

### 3. è®°å½•å­¦ä¹ è¿›åº¦
```
POST /api/courses/:id/progress
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "progress": 60,        // å­¦ä¹ è¿›åº¦ç™¾åˆ†æ¯” 0-100
  "lastPosition": 0,     // æœ€åå­¦ä¹ ä½ç½®
  "studyDuration": 300,  // æœ¬æ¬¡å­¦ä¹ æ—¶é•¿ï¼ˆç§’ï¼‰
  "completed": 0         // æ˜¯å¦å®Œæˆ 0/1
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "message": "å­¦ä¹ è®°å½•å·²æ›´æ–°",
  "data": {
    "id": 10,
    "patient_id": 5,
    "course_id": 1,
    "progress": 60,
    "completed": 0,
    "study_duration": 1200,
    "last_study_at": "2025-11-08T10:30:00.000Z"
  }
}
```

### 4. è·å–æˆ‘çš„å­¦ä¹ è®°å½•
```
GET /api/courses/my-learning
```

**è¯·æ±‚å‚æ•°ï¼š**
```javascript
{
  completed: 0,    // å¯é€‰ï¼Œç­›é€‰å·²å®Œæˆ/æœªå®Œæˆ 0/1
  page: 1,
  pageSize: 10
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "data": {
    "records": [
      {
        "id": 10,
        "course_id": 1,
        "title": "è®¤è¯†é€ å£",
        "cover_image": "/images/course1.jpg",
        "progress": 60,
        "completed": 0,
        "study_duration": 1200,
        "last_study_at": "2025-11-08T10:30:00.000Z"
      }
    ],
    "stats": {
      "total_courses": 5,
      "completed_courses": 2,
      "total_duration": 5400
    },
    "pagination": {
      "page": 1,
      "pageSize": 10
    }
  }
}
```

### 5. ç‚¹èµè¯¾ç¨‹
```
POST /api/courses/:id/like
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "message": "ç‚¹èµæˆåŠŸ"
}
```

---

## æ•°æ®æµç¨‹å›¾

### è¯¾ç¨‹åˆ—è¡¨åŠ è½½æµç¨‹
```
ç”¨æˆ·æ‰“å¼€æ•™è‚²é¡µé¢
    â†“
å‰ç«¯ï¼šeducation.js â†’ onLoad()
    â†“
å‰ç«¯ï¼šloadFromBackend()
    â†“
å‰ç«¯ï¼šapi.getCourses({page: 1, pageSize: 50})
    â†“
åç«¯ï¼šGET /api/courses
    â†“
åç«¯ï¼šCourseController.getList()
    â†“
åç«¯ï¼šCourse.findAll(filters)
    â†“
æ•°æ®åº“ï¼šSELECT * FROM courses WHERE...
    â†“
åç«¯ï¼šè¿”å›è¯¾ç¨‹åˆ—è¡¨ JSON
    â†“
å‰ç«¯ï¼šè§£ææ•°æ®å¹¶æŒ‰åˆ†ç±»åˆ†ç»„
    â†“
å‰ç«¯ï¼šsetData() æ›´æ–°é¡µé¢æ˜¾ç¤º
```

### å­¦ä¹ è¿›åº¦è®°å½•æµç¨‹
```
ç”¨æˆ·å®Œæˆç« èŠ‚å­¦ä¹ 
    â†“
å‰ç«¯ï¼šcourse-study.js â†’ completeChapter()
    â†“
å‰ç«¯ï¼šupdateStudyProgress(progress)
    â†“
å‰ç«¯ï¼šapi.recordCourseProgress(courseId, progressData)
    â†“
åç«¯ï¼šPOST /api/courses/:id/progress
    â†“
åç«¯ï¼šCourseController.recordProgress()
    â†“
åç«¯ï¼šLearningRecord.createOrUpdate(recordData)
    â†“
æ•°æ®åº“ï¼šINSERT ... ON DUPLICATE KEY UPDATE
    â†“
åç«¯ï¼šè¿”å›æ›´æ–°åçš„å­¦ä¹ è®°å½•
    â†“
å‰ç«¯ï¼šåŒæ—¶æ›´æ–°æœ¬åœ°ç¼“å­˜
    â†“
å‰ç«¯ï¼šæ˜¾ç¤ºè¿›åº¦æ›´æ–°æˆåŠŸæç¤º
```

---

## æµ‹è¯•éªŒè¯

### å•å…ƒæµ‹è¯•æ¸…å•

#### âœ… æ•°æ®åº“æµ‹è¯•
```sql
-- 1. éªŒè¯è¯¾ç¨‹åˆ†ç±»
SELECT COUNT(*) FROM course_categories;
-- é¢„æœŸï¼š5

-- 2. éªŒè¯ç¤ºä¾‹è¯¾ç¨‹
SELECT COUNT(*) FROM courses;
-- é¢„æœŸï¼šè‡³å°‘5æ¡

-- 3. éªŒè¯å­¦ä¹ è®°å½•è¡¨ç»“æ„
DESC learning_records;
-- é¢„æœŸï¼šåŒ…å« patient_id, course_id, progress, completed ç­‰å­—æ®µ
```

#### âœ… åç«¯APIæµ‹è¯•
```bash
# ä½¿ç”¨curlæˆ–Postmanæµ‹è¯•

# 1. å¥åº·æ£€æŸ¥
curl http://localhost:3000/api/health

# 2. è·å–è¯¾ç¨‹åˆ—è¡¨ï¼ˆéœ€è¦tokenï¼‰
curl -H "Authorization: Bearer YOUR_TOKEN" \
     http://localhost:3000/api/courses

# 3. è·å–è¯¾ç¨‹è¯¦æƒ…
curl -H "Authorization: Bearer YOUR_TOKEN" \
     http://localhost:3000/api/courses/1

# 4. è®°å½•å­¦ä¹ è¿›åº¦
curl -X POST \
     -H "Authorization: Bearer YOUR_TOKEN" \
     -H "Content-Type: application/json" \
     -d '{"progress":50,"studyDuration":300,"completed":0}' \
     http://localhost:3000/api/courses/1/progress
```

#### âœ… å‰ç«¯åŠŸèƒ½æµ‹è¯•
- [ ] æ•™è‚²é¦–é¡µæ­£å¸¸åŠ è½½
- [ ] è¯¾ç¨‹åˆ†ç±»å¡ç‰‡å¯ç‚¹å‡»
- [ ] æ¨èè¯¾ç¨‹åˆ—è¡¨æ˜¾ç¤ºæ­£å¸¸
- [ ] å­¦ä¹ ç»Ÿè®¡æ•°æ®æ˜¾ç¤º
- [ ] ç‚¹å‡»è¯¾ç¨‹è¿›å…¥è¯¦æƒ…é¡µ
- [ ] è¯¾ç¨‹è¯¦æƒ…ä¿¡æ¯å®Œæ•´
- [ ] å¼€å§‹å­¦ä¹ åŠŸèƒ½æ­£å¸¸
- [ ] ç« èŠ‚å­¦ä¹ è¿›åº¦è®°å½•
- [ ] å®Œæˆè¯¾ç¨‹åç»Ÿè®¡æ›´æ–°
- [ ] æœ€è¿‘å­¦ä¹ åˆ—è¡¨æ›´æ–°

---

## å¸¸è§é—®é¢˜

### Q1: å‰ç«¯æ— æ³•è·å–è¯¾ç¨‹æ•°æ®ï¼Œè¿”å›401æœªæˆæƒ
**åŸå› ï¼š** ç”¨æˆ·æœªç™»å½•æˆ–Tokenè¿‡æœŸ

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç™»å½•
   ```javascript
   console.log(wx.getStorageSync('token'))
   ```
2. é‡æ–°ç™»å½•è·å–æ–°Token
3. ç¡®è®¤åç«¯JWTéªŒè¯ä¸­é—´ä»¶é…ç½®æ­£ç¡®

### Q2: è¯¾ç¨‹åˆ—è¡¨æ˜¾ç¤ºä¸ºç©º
**åŸå› ï¼š** æ•°æ®åº“æœªåˆå§‹åŒ–æˆ–æŸ¥è¯¢å¤±è´¥

**è§£å†³æ–¹æ¡ˆï¼š**
1. è¿è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
   ```bash
   node backend/src/scripts/initDatabase.js
   ```
2. æ£€æŸ¥åç«¯æ—¥å¿—æ˜¯å¦æœ‰é”™è¯¯
3. éªŒè¯æ•°æ®åº“ä¸­æ˜¯å¦æœ‰è¯¾ç¨‹æ•°æ®
   ```sql
   SELECT * FROM courses;
   ```

### Q3: å­¦ä¹ è¿›åº¦æ— æ³•ä¿å­˜
**åŸå› ï¼š** ç¼ºå°‘æ‚£è€…IDæˆ–APIè°ƒç”¨å¤±è´¥

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®è®¤ç”¨æˆ·å·²å®Œæˆæ‚£è€…ä¿¡æ¯ç™»è®°
2. æ£€æŸ¥è¯·æ±‚å‚æ•°æ˜¯å¦æ­£ç¡®
   ```javascript
   // course-study.js ä¸­æŸ¥çœ‹æ—¥å¿—
   console.log('å‡†å¤‡æ›´æ–°å­¦ä¹ è¿›åº¦:', {
     courseId,
     progress,
     studyDuration
   })
   ```
3. æŸ¥çœ‹åç«¯æ˜¯å¦æ­£ç¡®è·å–patientId
   ```javascript
   // åç«¯ courseController.js
   console.log('Patient ID:', req.user.patientId)
   ```

### Q4: çœŸæœºè°ƒè¯•æ— æ³•è¿æ¥åç«¯
**åŸå› ï¼š** ç½‘ç»œé…ç½®é—®é¢˜æˆ–åŸŸåé™åˆ¶

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®ä¿æ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€å±€åŸŸç½‘
2. ä¿®æ”¹é…ç½®ä¸ºç”µè„‘IPåœ°å€
   ```javascript
   // patientApp/config.js
   apiBaseUrl: 'http://192.168.1.100:3000/api'  // æ”¹ä¸ºä½ çš„IP
   ```
3. åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­å‹¾é€‰"ä¸æ ¡éªŒåˆæ³•åŸŸå"
4. ç¡®ä¿ç”µè„‘é˜²ç«å¢™å…è®¸3000ç«¯å£è®¿é—®

### Q5: è¯¾ç¨‹å†…å®¹æ˜¾ç¤ºHTMLæ ‡ç­¾
**åŸå› ï¼š** å‰ç«¯æœªæ­£ç¡®æ¸²æŸ“å¯Œæ–‡æœ¬å†…å®¹

**è§£å†³æ–¹æ¡ˆï¼š**
1. ä½¿ç”¨å¾®ä¿¡å°ç¨‹åºçš„ `rich-text` ç»„ä»¶
   ```xml
   <rich-text nodes="{{course.content}}"></rich-text>
   ```
2. æˆ–ä½¿ç”¨ç¬¬ä¸‰æ–¹å¯Œæ–‡æœ¬ç»„ä»¶å¦‚ `wxParse`

### Q6: è¯¾ç¨‹å›¾ç‰‡æ— æ³•æ˜¾ç¤º
**åŸå› ï¼š** å›¾ç‰‡è·¯å¾„é…ç½®é—®é¢˜

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥è¯¾ç¨‹æ•°æ®ä¸­çš„ `cover_image` å­—æ®µ
2. ç¡®ä¿å›¾ç‰‡è·¯å¾„æ­£ç¡®
3. é…ç½®é™æ€èµ„æºæœåŠ¡
   ```javascript
   // backend/server.js
   app.use('/images', express.static('uploads/courses'))
   ```

---

## ä¸‹ä¸€æ­¥ä¼˜åŒ–å»ºè®®

### åŠŸèƒ½å¢å¼º
1. **è§†é¢‘æ’­æ”¾åŠŸèƒ½** - æ”¯æŒè¯¾ç¨‹è§†é¢‘å­¦ä¹ 
2. **è¯¾ç¨‹è¯„è®º** - å…è®¸ç”¨æˆ·è¯„è®ºè¯¾ç¨‹
3. **å­¦ä¹ è¯ä¹¦** - å®Œæˆè¯¾ç¨‹åé¢å‘è¯ä¹¦
4. **è¯¾ç¨‹æœç´¢** - æ·»åŠ è¯¾ç¨‹æœç´¢åŠŸèƒ½
5. **ç¦»çº¿å­¦ä¹ ** - æ”¯æŒè¯¾ç¨‹å†…å®¹ä¸‹è½½

### æ€§èƒ½ä¼˜åŒ–
1. **æ•°æ®ç¼“å­˜** - ä½¿ç”¨Redisç¼“å­˜çƒ­é—¨è¯¾ç¨‹
2. **åˆ†é¡µåŠ è½½** - å®ç°æ»šåŠ¨åŠ è½½æ›´å¤šè¯¾ç¨‹
3. **å›¾ç‰‡ä¼˜åŒ–** - ä½¿ç”¨CDNå’Œå›¾ç‰‡å‹ç¼©
4. **æ‡’åŠ è½½** - è¯¾ç¨‹å›¾ç‰‡æ‡’åŠ è½½

### ç”¨æˆ·ä½“éªŒ
1. **å­¦ä¹ æé†’** - å®šæ—¶æé†’ç”¨æˆ·å­¦ä¹ 
2. **å­¦ä¹ è·¯å¾„** - æ¨èä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„
3. **å­¦ä¹ æ’è¡Œ** - å­¦ä¹ æ—¶é•¿æ’è¡Œæ¦œ
4. **å­¦ä¹ å¾½ç« ** - å­¦ä¹ æˆå°±ç³»ç»Ÿ

---

## æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- åç«¯æ—¥å¿—ï¼š`backend/logs/`
- å°ç¨‹åºæ§åˆ¶å°ï¼šå¾®ä¿¡å¼€å‘è€…å·¥å…·
- æ•°æ®åº“æ—¥å¿—ï¼šMySQL error log

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0  
**æ›´æ–°æ—¥æœŸ**: 2025-11-08  
**ç»´æŠ¤è€…**: StomaCareSystem Team

