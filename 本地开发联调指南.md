# æœ¬åœ°å¼€å‘ç¯å¢ƒè”è°ƒè°ƒè¯•æŒ‡å—

## ğŸ“‹ ç›®å½•
- [å¼€å‘ç¯å¢ƒæ¦‚è¿°](#å¼€å‘ç¯å¢ƒæ¦‚è¿°)
- [æ­¥éª¤1ï¼šå¯åŠ¨æœ¬åœ°åç«¯](#æ­¥éª¤1å¯åŠ¨æœ¬åœ°åç«¯)
- [æ­¥éª¤2ï¼šé…ç½®å°ç¨‹åº](#æ­¥éª¤2é…ç½®å°ç¨‹åº)
- [æ­¥éª¤3ï¼šå¾®ä¿¡å¼€å‘è€…å·¥å…·é…ç½®](#æ­¥éª¤3å¾®ä¿¡å¼€å‘è€…å·¥å…·é…ç½®)
- [æ­¥éª¤4ï¼šå¼€å§‹è°ƒè¯•](#æ­¥éª¤4å¼€å§‹è°ƒè¯•)
- [è°ƒè¯•æŠ€å·§](#è°ƒè¯•æŠ€å·§)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## å¼€å‘ç¯å¢ƒæ¦‚è¿°

### å¼€å‘æ¶æ„

```
å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼ˆæœ¬åœ°ï¼‰
    â†“ HTTP (localhost)
Node.js åç«¯ï¼ˆæœ¬åœ°è¿è¡Œï¼‰
    â†“
MySQL æ•°æ®åº“ï¼ˆæœ¬åœ°ï¼‰
```

**ä¼˜åŠ¿ï¼š**
- âœ… å¿«é€Ÿè¿­ä»£ï¼Œæ— éœ€éƒ¨ç½²
- âœ… å®æ—¶æŸ¥çœ‹æ—¥å¿—
- âœ… æ–¹ä¾¿è°ƒè¯•å’Œæ–­ç‚¹
- âœ… ä¿®æ”¹ä»£ç ç«‹å³ç”Ÿæ•ˆ

---

## æ­¥éª¤1ï¼šå¯åŠ¨æœ¬åœ°åç«¯

### 1.1 ç¡®ä¿ç¯å¢ƒå·²å®‰è£…

```bash
# æ£€æŸ¥ Node.js
node -v  # åº”è¯¥ >= 14.0.0

# æ£€æŸ¥ MySQL
mysql -V  # åº”è¯¥ >= 5.7

# æ£€æŸ¥ npm
npm -v
```

### 1.2 é…ç½®æœ¬åœ°æ•°æ®åº“

**Windows PowerShell / CMD:**
```powershell
# ç™»å½• MySQL
mysql -u root -p

# åˆ›å»ºæ•°æ®åº“
CREATE DATABASE stoma_care_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# é€€å‡º
EXIT;
```

### 1.3 é…ç½®æœ¬åœ°ç¯å¢ƒå˜é‡

åœ¨ `backend` ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰ï¼š

```env
# æ•°æ®åº“é…ç½®ï¼ˆæœ¬åœ°ï¼‰
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=ä½ çš„MySQLå¯†ç 
DB_NAME=stoma_care_db

# JWTå¯†é’¥ï¼ˆå¼€å‘ç¯å¢ƒå¯ä»¥ç®€å•ä¸€äº›ï¼‰
JWT_SECRET=dev_secret_key_123456

# å¾®ä¿¡å°ç¨‹åºé…ç½®
WECHAT_APPID=wx61ba15d015833945
WECHAT_SECRET=39dcc9d80a1ccbc94142d96519efad07

# æœåŠ¡å™¨é…ç½®ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
PORT=3000
NODE_ENV=development
```

### 1.4 å®‰è£…ä¾èµ–

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# å®‰è£…ä¾èµ–
npm install
```

### 1.5 åˆå§‹åŒ–æ•°æ®åº“

```bash
# åˆå§‹åŒ–æ•°æ®åº“ï¼ˆåˆ›å»ºè¡¨å’Œç¤ºä¾‹æ•°æ®ï¼‰
npm run init-db
```

### 1.6 å¯åŠ¨åç«¯æœåŠ¡

**æ–¹å¼Aï¼šå¼€å‘æ¨¡å¼ï¼ˆæ¨èï¼Œæ”¯æŒçƒ­é‡è½½ï¼‰**

```bash
npm run dev
```

**æ–¹å¼Bï¼šæ™®é€šæ¨¡å¼**

```bash
npm start
```

**å¯åŠ¨æˆåŠŸçš„æ ‡å¿—ï¼š**

```
âœ“ æ•°æ®åº“è¿æ¥æˆåŠŸ
âœ“ æœåŠ¡å™¨è¿è¡Œåœ¨ç«¯å£ 3000
âœ“ APIåœ°å€: http://localhost:3000
```

### 1.7 éªŒè¯åç«¯æœåŠ¡

æ‰“å¼€æµè§ˆå™¨æˆ–ä½¿ç”¨ curl æµ‹è¯•ï¼š

```bash
# æµ‹è¯•å¥åº·æ£€æŸ¥æ¥å£
curl http://localhost:3000/api/health

# åº”è¯¥è¿”å›
# {"status":"ok","message":"æœåŠ¡è¿è¡Œæ­£å¸¸"}
```

---

## æ­¥éª¤2ï¼šé…ç½®å°ç¨‹åº

### 2.1 ä¿®æ”¹å°ç¨‹åºé…ç½®æ–‡ä»¶

**æ‚£è€…ç«¯ï¼š`patientApp/config.js`**

```javascript
// æ‚£è€…ç«¯é…ç½®æ–‡ä»¶
module.exports = {
  // å¼€å‘ç¯å¢ƒï¼šä½¿ç”¨æœ¬åœ° API
  apiBaseUrl: 'http://localhost:3000/api',
  
  // ç”Ÿäº§ç¯å¢ƒ API åœ°å€ï¼ˆæ³¨é‡Šæ‰ï¼‰
  // apiBaseUrl: 'https://api.yourdomain.com/api',
  
  // æ–‡ä»¶ä¸Šä¼ é…ç½®
  uploadUrl: 'http://localhost:3000/api/assessments/upload',
  
  // è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  timeout: 10000,
  
  // ç‰ˆæœ¬ä¿¡æ¯
  version: '1.0.0'
}
```

**æŠ¤å£«ç«¯ï¼š`nurseApp/config.js`**

```javascript
// æŠ¤å£«ç«¯é…ç½®æ–‡ä»¶
module.exports = {
  // å¼€å‘ç¯å¢ƒï¼šä½¿ç”¨æœ¬åœ° API
  apiBaseUrl: 'http://localhost:3000/api',
  
  // ç”Ÿäº§ç¯å¢ƒ API åœ°å€ï¼ˆæ³¨é‡Šæ‰ï¼‰
  // apiBaseUrl: 'https://api.yourdomain.com/api',
  
  // è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  timeout: 10000,
  
  // ç‰ˆæœ¬ä¿¡æ¯
  version: '1.0.0'
}
```

### 2.2 ç¯å¢ƒåˆ‡æ¢ä¼˜åŒ–ï¼ˆå¯é€‰ï¼‰

ä¸ºäº†æ–¹ä¾¿å¼€å‘/ç”Ÿäº§ç¯å¢ƒåˆ‡æ¢ï¼Œå¯ä»¥è¿™æ ·é…ç½®ï¼š

```javascript
// config.js
const isDev = true; // å¼€å‘ç¯å¢ƒè®¾ä¸º trueï¼Œç”Ÿäº§ç¯å¢ƒè®¾ä¸º false

module.exports = {
  apiBaseUrl: isDev 
    ? 'http://localhost:3000/api'           // å¼€å‘ç¯å¢ƒ
    : 'https://api.yourdomain.com/api',     // ç”Ÿäº§ç¯å¢ƒ
  
  uploadUrl: isDev
    ? 'http://localhost:3000/api/assessments/upload'
    : 'https://api.yourdomain.com/api/assessments/upload',
  
  timeout: 10000,
  version: '1.0.0'
}
```

---

## æ­¥éª¤3ï¼šå¾®ä¿¡å¼€å‘è€…å·¥å…·é…ç½®

### 3.1 å¯¼å…¥å°ç¨‹åºé¡¹ç›®

1. æ‰“å¼€**å¾®ä¿¡å¼€å‘è€…å·¥å…·**
2. é€‰æ‹© "å°ç¨‹åº" â†’ "å¯¼å…¥é¡¹ç›®"
3. é…ç½®ï¼š
   - **é¡¹ç›®ç›®å½•**ï¼šé€‰æ‹© `D:\wk\Code\Cursor\2025\StomaCareSystem\patientApp`
   - **AppID**ï¼šå¡«å†™ `wx61ba15d015833945`ï¼ˆæˆ–ä½¿ç”¨æµ‹è¯•å·ï¼‰
   - **é¡¹ç›®åç§°**ï¼š`é€ å£æŠ¤ç†-æ‚£è€…ç«¯ï¼ˆå¼€å‘ï¼‰`

### 3.2 é…ç½®å¼€å‘è®¾ç½®ï¼ˆé‡è¦ï¼ï¼‰

1. ç‚¹å‡»å³ä¸Šè§’ **"è¯¦æƒ…"** æŒ‰é’®
2. åœ¨ **"æœ¬åœ°è®¾ç½®"** æ ‡ç­¾é¡µä¸­ï¼Œå‹¾é€‰ï¼š
   - âœ… **ä¸æ ¡éªŒåˆæ³•åŸŸåã€web-viewï¼ˆä¸šåŠ¡åŸŸåï¼‰ã€TLSç‰ˆæœ¬ä»¥åŠHTTPSè¯ä¹¦**
   - âœ… **å¯ç”¨è°ƒè¯•**
   - âœ… **ä¸æ ¡éªŒå®‰å…¨åŸŸå**ï¼ˆå¦‚æœæœ‰ï¼‰

**ä¸ºä»€ä¹ˆè¦è¿™æ ·é…ç½®ï¼Ÿ**
- æœ¬åœ°å¼€å‘ä½¿ç”¨ `http://localhost`ï¼Œä¸æ˜¯åˆæ³•åŸŸå
- å¼€å‘ç¯å¢ƒé€šå¸¸ä¸é…ç½® HTTPS
- å‹¾é€‰åæ‰èƒ½è°ƒç”¨æœ¬åœ° API

### 3.3 ä½¿ç”¨æµ‹è¯•å·ï¼ˆå¯é€‰ï¼‰

å¦‚æœæ²¡æœ‰æ­£å¼çš„ AppIDï¼Œå¯ä»¥ä½¿ç”¨æµ‹è¯•å·ï¼š

1. å¾®ä¿¡å¼€å‘è€…å·¥å…· â†’ å³ä¸Šè§’å¤´åƒ â†’ **ä½¿ç”¨æµ‹è¯•å·**
2. æ‰«ç ç™»å½•å³å¯è·å¾—ä¸´æ—¶ AppID
3. æµ‹è¯•å·å¯ä»¥æ­£å¸¸ä½¿ç”¨æ‰€æœ‰API

---

## æ­¥éª¤4ï¼šå¼€å§‹è°ƒè¯•

### 4.1 å¯åŠ¨å°ç¨‹åº

1. ç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œï¼ˆ`npm run dev`ï¼‰
2. åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ç‚¹å‡» **"ç¼–è¯‘"**
3. å°ç¨‹åºåº”è¯¥æ­£å¸¸å¯åŠ¨

### 4.2 æµ‹è¯•ç™»å½•åŠŸèƒ½

åœ¨å°ç¨‹åºçš„ç™»å½•é¡µé¢ï¼š

1. ç‚¹å‡» "ä¸€é”®ç™»å½•" æŒ‰é’®
2. æŸ¥çœ‹ **æ§åˆ¶å°** è¾“å‡ºï¼š
   ```javascript
   è·å–å¾®ä¿¡codeæˆåŠŸ: 071xxxxx
   è°ƒç”¨ç™»å½•æ¥å£...
   ç™»å½•æˆåŠŸ
   ```

3. åŒæ—¶æŸ¥çœ‹ **åç«¯ç»ˆç«¯** æ—¥å¿—ï¼š
   ```
   POST /api/auth/patient-login
   å¾®ä¿¡ç™»å½•æˆåŠŸ: openid_xxx
   ```

### 4.3 æµ‹è¯• API è°ƒç”¨

åœ¨å°ç¨‹åºä¸­æµ‹è¯•å„ç§åŠŸèƒ½ï¼š

- æŸ¥çœ‹ä¸ªäººä¿¡æ¯
- ä¸Šä¼ å›¾ç‰‡
- è·å–è¯¾ç¨‹åˆ—è¡¨
- è®°å½•ç—‡çŠ¶æ—¥è®°

æ¯æ¬¡è°ƒç”¨éƒ½èƒ½åœ¨ï¼š
- **å°ç¨‹åºæ§åˆ¶å°**ï¼šçœ‹åˆ°è¯·æ±‚å’Œå“åº”
- **åç«¯ç»ˆç«¯**ï¼šçœ‹åˆ°APIæ—¥å¿—

---

## è°ƒè¯•æŠ€å·§

### 1. å°ç¨‹åºç«¯è°ƒè¯•

#### ä½¿ç”¨ console.log

```javascript
// åœ¨å°ç¨‹åºé¡µé¢ä¸­
onLoad() {
  console.log('é¡µé¢åŠ è½½')
  
  const app = getApp()
  app.request({
    url: '/patients/profile',
    method: 'GET'
  }).then(res => {
    console.log('è·å–æ‚£è€…ä¿¡æ¯æˆåŠŸ:', res)
  }).catch(err => {
    console.error('è·å–å¤±è´¥:', err)
  })
}
```

#### ä½¿ç”¨è°ƒè¯•å™¨

1. åœ¨ä»£ç ä¸­è®¾ç½®æ–­ç‚¹ï¼ˆç‚¹å‡»è¡Œå·ï¼‰
2. ç¼–è¯‘è¿è¡Œ
3. è§¦å‘ç›¸åº”åŠŸèƒ½
4. åœ¨æ–­ç‚¹å¤„æš‚åœï¼ŒæŸ¥çœ‹å˜é‡

#### æŸ¥çœ‹ç½‘ç»œè¯·æ±‚

1. å¾®ä¿¡å¼€å‘è€…å·¥å…· â†’ **Network** æ ‡ç­¾
2. å¯ä»¥çœ‹åˆ°æ‰€æœ‰ HTTP è¯·æ±‚
3. ç‚¹å‡»æŸ¥çœ‹è¯·æ±‚/å“åº”è¯¦æƒ…

#### æŸ¥çœ‹ Storage

1. å¾®ä¿¡å¼€å‘è€…å·¥å…· â†’ **Storage** æ ‡ç­¾
2. æŸ¥çœ‹ `token`ã€`userInfo` ç­‰å­˜å‚¨çš„æ•°æ®
3. å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹æˆ–åˆ é™¤

### 2. åç«¯è°ƒè¯•

#### ä½¿ç”¨ console.log

```javascript
// åœ¨åç«¯ä»£ç ä¸­
exports.getPatientProfile = async (req, res, next) => {
  try {
    console.log('è·å–æ‚£è€…ä¿¡æ¯ï¼Œç”¨æˆ·ID:', req.user.userId);
    const patient = await Patient.findByUserId(req.user.userId);
    console.log('æ‚£è€…ä¿¡æ¯:', patient);
    return response.success(res, patient);
  } catch (error) {
    console.error('é”™è¯¯:', error);
    next(error);
  }
};
```

#### ä½¿ç”¨ VSCode è°ƒè¯•å™¨

1. åœ¨ VSCode ä¸­æ‰“å¼€ `backend` æ–‡ä»¶å¤¹
2. åˆ›å»º `.vscode/launch.json`ï¼š

```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "node",
      "request": "launch",
      "name": "å¯åŠ¨åç«¯æœåŠ¡",
      "skipFiles": ["<node_internals>/**"],
      "program": "${workspaceFolder}/src/server.js",
      "envFile": "${workspaceFolder}/.env"
    }
  ]
}
```

3. æŒ‰ `F5` å¯åŠ¨è°ƒè¯•
4. åœ¨ä»£ç ä¸­è®¾ç½®æ–­ç‚¹
5. è§¦å‘å°ç¨‹åºè¯·æ±‚ï¼Œåœ¨æ–­ç‚¹å¤„æš‚åœ

#### æŸ¥çœ‹æ•°æ®åº“

ä½¿ç”¨ MySQL Workbench æˆ–å‘½ä»¤è¡ŒæŸ¥çœ‹æ•°æ®ï¼š

```sql
-- æŸ¥çœ‹ç”¨æˆ·è¡¨
SELECT * FROM users;

-- æŸ¥çœ‹æ‚£è€…è¡¨
SELECT * FROM patients;

-- æŸ¥çœ‹æœ€è¿‘çš„è¯„ä¼°è®°å½•
SELECT * FROM assessments ORDER BY created_at DESC LIMIT 10;
```

### 3. å¸¸ç”¨è°ƒè¯•åœºæ™¯

#### åœºæ™¯1ï¼šç™»å½•å¤±è´¥

**å°ç¨‹åºç«¯æ£€æŸ¥ï¼š**
```javascript
// æŸ¥çœ‹æ˜¯å¦è·å–åˆ° code
wx.login({
  success: res => {
    console.log('å¾®ä¿¡ code:', res.code);
  }
});
```

**åç«¯æ£€æŸ¥ï¼š**
- æŸ¥çœ‹ `.env` ä¸­çš„ `WECHAT_APPID` å’Œ `WECHAT_SECRET` æ˜¯å¦æ­£ç¡®
- æŸ¥çœ‹åç«¯æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

#### åœºæ™¯2ï¼šAPI è°ƒç”¨å¤±è´¥

**æ£€æŸ¥æ¸…å•ï¼š**
- [ ] åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œï¼ˆ`http://localhost:3000/api/health`ï¼‰
- [ ] å°ç¨‹åº `config.js` ä¸­çš„ `apiBaseUrl` æ˜¯å¦æ­£ç¡®
- [ ] å¾®ä¿¡å¼€å‘è€…å·¥å…·æ˜¯å¦å‹¾é€‰"ä¸æ ¡éªŒåˆæ³•åŸŸå"
- [ ] token æ˜¯å¦æœ‰æ•ˆï¼ˆæŸ¥çœ‹ Storageï¼‰

**è°ƒè¯•æ–¹æ³•ï¼š**
```javascript
// åœ¨å°ç¨‹åºä¸­
const app = getApp()
console.log('API åœ°å€:', app.globalData.apiBaseUrl)
console.log('Token:', app.globalData.token)

app.request({
  url: '/patients/profile',
  method: 'GET'
}).then(res => {
  console.log('æˆåŠŸ:', res)
}).catch(err => {
  console.error('å¤±è´¥:', err)
  console.error('é”™è¯¯è¯¦æƒ…:', JSON.stringify(err))
})
```

#### åœºæ™¯3ï¼šæ–‡ä»¶ä¸Šä¼ å¤±è´¥

**å°ç¨‹åºç«¯ï¼š**
```javascript
wx.chooseImage({
  success: (res) => {
    console.log('é€‰æ‹©çš„å›¾ç‰‡:', res.tempFilePaths)
    
    wx.uploadFile({
      url: 'http://localhost:3000/api/assessments/upload',
      filePath: res.tempFilePaths[0],
      name: 'image',
      header: {
        'Authorization': `Bearer ${app.globalData.token}`
      },
      success: (uploadRes) => {
        console.log('ä¸Šä¼ æˆåŠŸ:', uploadRes.data)
      },
      fail: (err) => {
        console.error('ä¸Šä¼ å¤±è´¥:', err)
      }
    })
  }
})
```

**åç«¯æ£€æŸ¥ï¼š**
- æ£€æŸ¥ `uploads` ç›®å½•æ˜¯å¦å­˜åœ¨
- æ£€æŸ¥æ–‡ä»¶å¤§å°é™åˆ¶
- æŸ¥çœ‹åç«¯æ—¥å¿—

---

## å¸¸è§é—®é¢˜

### Q1: å°ç¨‹åºæç¤º "ä¸åœ¨ä»¥ä¸‹ request åˆæ³•åŸŸååˆ—è¡¨ä¸­"

**åŸå› ï¼š** æœªå‹¾é€‰"ä¸æ ¡éªŒåˆæ³•åŸŸå"

**è§£å†³ï¼š**
1. å¾®ä¿¡å¼€å‘è€…å·¥å…· â†’ è¯¦æƒ… â†’ æœ¬åœ°è®¾ç½®
2. å‹¾é€‰ âœ… **ä¸æ ¡éªŒåˆæ³•åŸŸåã€web-viewï¼ˆä¸šåŠ¡åŸŸåï¼‰ã€TLSç‰ˆæœ¬ä»¥åŠHTTPSè¯ä¹¦**

### Q2: ç™»å½•å¤±è´¥ï¼Œæç¤º "invalid code"

**å¯èƒ½åŸå› ï¼š**
- AppID æˆ– AppSecret é…ç½®é”™è¯¯
- code å·²è¢«ä½¿ç”¨ï¼ˆä¸€ä¸ª code åªèƒ½ç”¨ä¸€æ¬¡ï¼‰

**è§£å†³ï¼š**
1. æ£€æŸ¥ `backend/.env` ä¸­çš„é…ç½®
2. ç¡®ä¿æ¯æ¬¡ç™»å½•é‡æ–°è·å– code

### Q3: API è°ƒç”¨è¿”å› 401 Unauthorized

**åŸå› ï¼š** Token æ— æ•ˆæˆ–è¿‡æœŸ

**è§£å†³ï¼š**
```javascript
// æ¸…é™¤æœ¬åœ°æ•°æ®ï¼Œé‡æ–°ç™»å½•
wx.removeStorageSync('token')
wx.removeStorageSync('userInfo')
wx.reLaunch({
  url: '/pages/index/index'
})
```

### Q4: åç«¯æ— æ³•è¿æ¥æ•°æ®åº“

**æ£€æŸ¥ï¼š**
```bash
# æ£€æŸ¥ MySQL æœåŠ¡
# Windows
Get-Service MySQL*

# æµ‹è¯•è¿æ¥
mysql -u root -p

# æ£€æŸ¥ .env é…ç½®
cat backend/.env
```

### Q5: ä¿®æ”¹ä»£ç åæ²¡æœ‰ç”Ÿæ•ˆ

**å°ç¨‹åºï¼š**
- ç‚¹å‡» "ç¼–è¯‘" æŒ‰é’®é‡æ–°ç¼–è¯‘
- æˆ–å‹¾é€‰ "è‡ªåŠ¨ä¿å­˜å¹¶ç¼–è¯‘"

**åç«¯ï¼š**
- å¦‚æœä½¿ç”¨ `npm run dev`ï¼ˆnodemonï¼‰ï¼Œä¼šè‡ªåŠ¨é‡å¯
- å¦‚æœä½¿ç”¨ `npm start`ï¼Œéœ€è¦æ‰‹åŠ¨é‡å¯ï¼ˆCtrl+C ç„¶åé‡æ–°è¿è¡Œï¼‰

### Q6: å¦‚ä½•æŸ¥çœ‹å®Œæ•´çš„é”™è¯¯ä¿¡æ¯ï¼Ÿ

**å°ç¨‹åºï¼š**
```javascript
app.request({
  url: '/xxx',
  method: 'GET'
}).catch(err => {
  console.error('å®Œæ•´é”™è¯¯:', JSON.stringify(err, null, 2))
})
```

**åç«¯ï¼š**
- æŸ¥çœ‹ç»ˆç«¯è¾“å‡º
- æŸ¥çœ‹ `backend/logs/` ç›®å½•ä¸‹çš„æ—¥å¿—æ–‡ä»¶

---

## å¼€å‘å·¥ä½œæµç¨‹

### æ—¥å¸¸å¼€å‘æµç¨‹

```bash
# 1. å¯åŠ¨åç«¯
cd backend
npm run dev

# 2. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
# å¯¼å…¥ patientApp æˆ– nurseApp

# 3. å¼€å‘å’Œè°ƒè¯•
# ä¿®æ”¹ä»£ç  â†’ ä¿å­˜ â†’ æŸ¥çœ‹æ•ˆæœ

# 4. æäº¤ä»£ç 
git add .
git commit -m "åŠŸèƒ½æè¿°"
```

### è°ƒè¯•æµç¨‹

```
1. å‘ç°é—®é¢˜
   â†“
2. å¤ç°é—®é¢˜
   â†“
3. æŸ¥çœ‹æ—¥å¿—
   - å°ç¨‹åºæ§åˆ¶å°
   - åç«¯ç»ˆç«¯
   - Network é¢æ¿
   â†“
4. å®šä½é—®é¢˜
   - è®¾ç½®æ–­ç‚¹
   - æ·»åŠ  console.log
   â†“
5. ä¿®å¤é—®é¢˜
   â†“
6. éªŒè¯ä¿®å¤
```

---

## è°ƒè¯•å·¥å…·æ¨è

### å°ç¨‹åºç«¯

1. **å¾®ä¿¡å¼€å‘è€…å·¥å…·**
   - Consoleï¼šæŸ¥çœ‹æ—¥å¿—
   - Networkï¼šæŸ¥çœ‹ç½‘ç»œè¯·æ±‚
   - Storageï¼šæŸ¥çœ‹æœ¬åœ°å­˜å‚¨
   - Debuggerï¼šè®¾ç½®æ–­ç‚¹

2. **vConsole**ï¼ˆå¯é€‰ï¼‰
   ```javascript
   // åœ¨ app.js ä¸­
   const VConsole = require('./lib/vconsole.min.js')
   new VConsole()
   ```

### åç«¯

1. **VSCode**
   - å†…ç½®è°ƒè¯•å™¨
   - æ–­ç‚¹è°ƒè¯•
   - å˜é‡æŸ¥çœ‹

2. **Postman**
   - æµ‹è¯• API æ¥å£
   - ä¿å­˜è¯·æ±‚é›†åˆ

3. **MySQL Workbench**
   - å›¾å½¢åŒ–æŸ¥çœ‹æ•°æ®åº“
   - æ‰§è¡Œ SQL æŸ¥è¯¢

4. **å‘½ä»¤è¡Œå·¥å…·**
   ```bash
   # æµ‹è¯• API
   curl http://localhost:3000/api/health
   
   # æŸ¥çœ‹ç«¯å£å ç”¨
   netstat -ano | findstr :3000
   
   # æŸ¥çœ‹è¿›ç¨‹
   tasklist | findstr node
   ```

---

## æ€§èƒ½ç›‘æ§

### å°ç¨‹åºæ€§èƒ½

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼š
1. ç‚¹å‡» **Performance** æ ‡ç­¾
2. æŸ¥çœ‹é¡µé¢åŠ è½½æ—¶é—´
3. æŸ¥çœ‹ API å“åº”æ—¶é—´

### åç«¯æ€§èƒ½

```javascript
// æ·»åŠ è¯·æ±‚æ—¶é—´è®°å½•
app.use((req, res, next) => {
  const start = Date.now();
  res.on('finish', () => {
    const duration = Date.now() - start;
    console.log(`${req.method} ${req.path} - ${duration}ms`);
  });
  next();
});
```

---

## æœ€ä½³å®è·µ

### 1. ä½¿ç”¨ç¯å¢ƒå˜é‡

```javascript
// config.js
const env = process.env.NODE_ENV || 'development';

module.exports = {
  apiBaseUrl: env === 'production' 
    ? 'https://api.yourdomain.com/api'
    : 'http://localhost:3000/api'
}
```

### 2. ç»Ÿä¸€é”™è¯¯å¤„ç†

```javascript
// å°ç¨‹åº app.js
request(options) {
  return new Promise((resolve, reject) => {
    wx.request({
      ...options,
      success: (res) => {
        if (res.statusCode === 200) {
          resolve(res.data)
        } else {
          this.showToast(`è¯·æ±‚å¤±è´¥: ${res.statusCode}`)
          reject(res)
        }
      },
      fail: (err) => {
        this.showToast('ç½‘ç»œé”™è¯¯')
        console.error('è¯·æ±‚å¤±è´¥:', err)
        reject(err)
      }
    })
  })
}
```

### 3. æ—¥å¿—åˆ†çº§

```javascript
// åç«¯
const logger = {
  info: (msg) => console.log('[INFO]', msg),
  warn: (msg) => console.warn('[WARN]', msg),
  error: (msg) => console.error('[ERROR]', msg),
  debug: (msg) => process.env.NODE_ENV === 'development' && console.log('[DEBUG]', msg)
}
```

### 4. Mock æ•°æ®ï¼ˆå¯é€‰ï¼‰

å¼€å‘åˆæœŸå¯ä»¥ä½¿ç”¨ mock æ•°æ®ï¼š

```javascript
// mock.js
module.exports = {
  patientInfo: {
    name: 'å¼ ä¸‰',
    age: 45,
    surgeryDate: '2024-01-15'
  }
}

// ä½¿ç”¨
const mockData = require('./mock')
console.log('Mock æ•°æ®:', mockData.patientInfo)
```

---

## ğŸ¯ æ€»ç»“

### å¼€å§‹å¼€å‘çš„å®Œæ•´æ­¥éª¤

```bash
# 1. å¯åŠ¨æ•°æ®åº“ï¼ˆå¦‚æœæœªå¯åŠ¨ï¼‰
# Windows: æ‰“å¼€ MySQL æœåŠ¡

# 2. å¯åŠ¨åç«¯
cd D:\wk\Code\Cursor\2025\StomaCareSystem\backend
npm run dev

# 3. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
# å¯¼å…¥é¡¹ç›®ï¼Œå‹¾é€‰"ä¸æ ¡éªŒåˆæ³•åŸŸå"

# 4. å¼€å§‹å¼€å‘è°ƒè¯•
# ä¿®æ”¹ä»£ç ï¼Œå®æ—¶æŸ¥çœ‹æ•ˆæœ
```

### è°ƒè¯•æŠ€å·§æ€»ç»“

- âœ… å–„ç”¨ `console.log`
- âœ… è®¾ç½®æ–­ç‚¹è°ƒè¯•
- âœ… æŸ¥çœ‹ Network é¢æ¿
- âœ… æ£€æŸ¥ Storage æ•°æ®
- âœ… æŸ¥çœ‹åç«¯æ—¥å¿—
- âœ… ä½¿ç”¨ Postman æµ‹è¯• API
- âœ… æ£€æŸ¥æ•°æ®åº“æ•°æ®

---

ç°åœ¨æ‚¨å¯ä»¥å¼€å§‹æœ¬åœ°å¼€å‘å’Œè°ƒè¯•äº†ï¼ğŸš€

æœ‰ä»»ä½•é—®é¢˜éšæ—¶æŸ¥çœ‹æœ¬æ–‡æ¡£æˆ–æé—®ã€‚

